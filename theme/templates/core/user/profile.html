{% load static %}
{% load static tailwind_tags %}
{% load socialaccount %}



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="shortcut icon" href="{% static 'imgs/1f874c74bab66d98afdb0acde7198d68-insignia-de-cabeza-de-astronauta-futurista.png' %}" type="image/x-icon">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" crossorigin="anonymous" />
    {% tailwind_css %}
</head>

<body style="background-image: url('{% static 'imgs/3416fc4113b69a0bf1cc75a772c4b5c4.gif' %}');" class="w-full h-screen object-contain object-cover object-fill">

<!---BR-->
    <style>

        ::-webkit-scrollbar{
          width:10px;
      }
      
      ::-webkit-scrollbar-track{
          background:transparent;
          border-radius: 50px;
      }
      
      ::-webkit-scrollbar-thumb {
        background: rgba(145, 14, 210, 0.448);
        border-radius: 20px;
        opacity: 0.5;
      }

    </style>



{% if user_raid %}
<!-- component -->
<div class="absolute px-3 bg-black bg-opacity-50 ml-8 rounded-md top-5">
    <!--- more free and premium Tailwind CSS components at https://tailwinduikit.com/ --->
        <button onclick="notificationHandler(false)" class=""><!-- component -->
            <div class="relative">
                <div class="absolute left-8 -top-2  bg-black rounded-md bg-opacity-50">
                   <span class="text-sm text-red-500 font-bold p-1">{{ notifications_count }}</span>
                </div>
                <div class="p-2">
                       <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor"
                    class="text-gray-600 w-6 h-6 hover:text-white"
                    viewBox="0 0 16 16"
                  >
                    <path
                      d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"
                    />
                  </svg>
                </div>
              </div></button>

              
        
    </div>
    <div class=" px-6 bg-black bg-opacity-50 ml-8 rounded-md">
        <div class="relative ">
            <a href="/">
                <button
                class="absolute right-0  bg-black bg-opacity-50  top-5 middle none center rounded-lg py-3 px-6 font-sans text-xs font-bold uppercase text-white shadow-md shadow-pink-500/20 transition-all hover:shadow-lg hover:shadow-pink-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"
                data-ripple-light="true"
                >
                Inicio
                </button>
            </a>            
        </div>
        <!--- more free and premium Tailwind CSS components at https://tailwinduikit.com/ --->
        </div>
    <br>
    <div class="w-full h-full bg-gray-800 bg-opacity-90 top-0 overflow-y-auto overflow-x-hidden fixed sticky-0 hidden z-50" id="chec-div">
        <!--- more free and premium Tailwind CSS components at https://tailwinduikit.com/ --->
        <div class="w-full absolute z-10 right-0 h-full overflow-x-hidden transform translate-x-0 transition ease-in-out duration-700" id="notification">
            <div class="2xl:w-4/12 bg-gray-200 h-screen overflow-y-auto p-8 absolute right-0">
                <div class="flex items-center justify-between">
                    <p tabindex="0" class="focus:outline-none text-2xl font-semibold leading-6 text-gray-800">Notifications</p>
                    <button role="button" aria-label="close modal" class="focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 rounded-md cursor-pointer" onclick="notificationHandler(false)">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 6L6 18" stroke="#4B5563" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M6 6L18 18" stroke="#4B5563" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>


                <div class="w-full p-3 mt-4 bg-white rounded flex">
                    <div tabindex="0" aria-label="loading icon" role="img" class="focus:outline-none w-8 h-8 border rounded-full border-gray-200 flex items-center justify-center">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.99992 1.33333C8.17673 1.33333 8.3463 1.40357 8.47132 1.52859C8.59635 1.65361 8.66659 1.82318 8.66659 1.99999V3.99999C8.66659 4.17681 8.59635 4.34638 8.47132 4.4714C8.3463 4.59642 8.17673 4.66666 7.99992 4.66666C7.82311 4.66666 7.65354 4.59642 7.52851 4.4714C7.40349 4.34638 7.33325 4.17681 7.33325 3.99999V1.99999C7.33325 1.82318 7.40349 1.65361 7.52851 1.52859C7.65354 1.40357 7.82311 1.33333 7.99992 1.33333ZM7.99992 11.3333C8.17673 11.3333 8.3463 11.4036 8.47132 11.5286C8.59635 11.6536 8.66659 11.8232 8.66659 12V14C8.66659 14.1768 8.59635 14.3464 8.47132 14.4714C8.3463 14.5964 8.17673 14.6667 7.99992 14.6667C7.82311 14.6667 7.65354 14.5964 7.52851 14.4714C7.40349 14.3464 7.33325 14.1768 7.33325 14V12C7.33325 11.8232 7.40349 11.6536 7.52851 11.5286C7.65354 11.4036 7.82311 11.3333 7.99992 11.3333ZM14.6666 8C14.6666 8.17681 14.5963 8.34638 14.4713 8.4714C14.3463 8.59642 14.1767 8.66666 13.9999 8.66666H11.9999C11.8231 8.66666 11.6535 8.59642 11.5285 8.4714C11.4035 8.34638 11.3333 8.17681 11.3333 8C11.3333 7.82318 11.4035 7.65361 11.5285 7.52859C11.6535 7.40357 11.8231 7.33333 11.9999 7.33333H13.9999C14.1767 7.33333 14.3463 7.40357 14.4713 7.52859C14.5963 7.65361 14.6666 7.82318 14.6666 8ZM4.66659 8C4.66659 8.17681 4.59635 8.34638 4.47132 8.4714C4.3463 8.59642 4.17673 8.66666 3.99992 8.66666H1.99992C1.82311 8.66666 1.65354 8.59642 1.52851 8.4714C1.40349 8.34638 1.33325 8.17681 1.33325 8C1.33325 7.82318 1.40349 7.65361 1.52851 7.52859C1.65354 7.40357 1.82311 7.33333 1.99992 7.33333H3.99992C4.17673 7.33333 4.3463 7.40357 4.47132 7.52859C4.59635 7.65361 4.66659 7.82318 4.66659 8ZM12.7139 12.714C12.5889 12.839 12.4194 12.9092 12.2426 12.9092C12.0658 12.9092 11.8963 12.839 11.7713 12.714L10.3573 11.3C10.2358 11.1743 10.1686 11.0059 10.1701 10.8311C10.1717 10.6563 10.2418 10.4891 10.3654 10.3654C10.489 10.2418 10.6562 10.1717 10.831 10.1702C11.0058 10.1687 11.1742 10.2359 11.2999 10.3573L12.7139 11.7707C12.7759 11.8326 12.8251 11.9061 12.8586 11.987C12.8922 12.068 12.9094 12.1547 12.9094 12.2423C12.9094 12.3299 12.8922 12.4167 12.8586 12.4976C12.8251 12.5786 12.7759 12.6521 12.7139 12.714ZM5.64259 5.64266C5.51757 5.76764 5.34803 5.83785 5.17125 5.83785C4.99448 5.83785 4.82494 5.76764 4.69992 5.64266L3.28659 4.22933C3.16149 4.10432 3.09118 3.93474 3.09112 3.7579C3.09105 3.58105 3.16125 3.41142 3.28625 3.28633C3.41126 3.16123 3.58084 3.09092 3.75768 3.09086C3.93453 3.0908 4.10416 3.16099 4.22925 3.28599L5.64259 4.7C5.76757 4.82501 5.83778 4.99455 5.83778 5.17133C5.83778 5.3481 5.76757 5.51764 5.64259 5.64266ZM3.28659 12.714C3.1616 12.589 3.09139 12.4194 3.09139 12.2427C3.09139 12.0659 3.1616 11.8963 3.28659 11.7713L4.70059 10.3573C4.76208 10.2937 4.83565 10.2429 4.91698 10.2079C4.99832 10.173 5.0858 10.1546 5.17432 10.1538C5.26284 10.1531 5.35062 10.1699 5.43256 10.2034C5.51449 10.237 5.58892 10.2865 5.65152 10.3491C5.71411 10.4117 5.76361 10.4861 5.79713 10.568C5.83065 10.65 5.84752 10.7377 5.84675 10.8263C5.84598 10.9148 5.82759 11.0023 5.79265 11.0836C5.75771 11.1649 5.70693 11.2385 5.64325 11.3L4.22992 12.714C4.168 12.776 4.09448 12.8252 4.01355 12.8587C3.93261 12.8923 3.84586 12.9095 3.75825 12.9095C3.67064 12.9095 3.58389 12.8923 3.50296 12.8587C3.42203 12.8252 3.3485 12.776 3.28659 12.714ZM10.3573 5.64266C10.2323 5.51764 10.1621 5.3481 10.1621 5.17133C10.1621 4.99455 10.2323 4.82501 10.3573 4.7L11.7706 3.28599C11.8956 3.1609 12.0652 3.09059 12.242 3.09053C12.4189 3.09046 12.5885 3.16066 12.7136 3.28566C12.8387 3.41067 12.909 3.58025 12.9091 3.75709C12.9091 3.93394 12.8389 4.10357 12.7139 4.22866L11.2999 5.64266C11.1749 5.76764 11.0054 5.83785 10.8286 5.83785C10.6518 5.83785 10.4823 5.76764 10.3573 5.64266Z"
                                fill="#F59E0B"
                            />
                        </svg>
                    </div>
                    <div class="pl-3">
                        <p tabindex="0" class="focus:outline-none text-sm leading-none">Hola {{ request.user }} <span class="text-indigo-700">Welcome Notifications</span>!!</p>
                        <p tabindex="0" class="focus:outline-none text-xs leading-3 pt-1 text-gray-500">T-Lofi-0xf3</p>
                    </div>
                </div>




                {% for notification in notifications %}


                {% if notification.type_notification == 'FR' %}
                <!----Notification for request friends-->

                <div class="w-full p-3 mt-4 bg-white rounded shadow flex flex-shrink-0">
                    <div tabindex="0" aria-label="group icon" role="img" class="focus:outline-none w-8 h-8 border rounded-full border-gray-200 flex flex-shrink-0 items-center justify-center">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M1.33325 14.6667C1.33325 13.2522 1.89516 11.8956 2.89535 10.8954C3.89554 9.89523 5.2521 9.33333 6.66659 9.33333C8.08107 9.33333 9.43763 9.89523 10.4378 10.8954C11.438 11.8956 11.9999 13.2522 11.9999 14.6667H1.33325ZM6.66659 8.66666C4.45659 8.66666 2.66659 6.87666 2.66659 4.66666C2.66659 2.45666 4.45659 0.666664 6.66659 0.666664C8.87659 0.666664 10.6666 2.45666 10.6666 4.66666C10.6666 6.87666 8.87659 8.66666 6.66659 8.66666ZM11.5753 10.1553C12.595 10.4174 13.5061 10.9946 14.1788 11.8046C14.8515 12.6145 15.2515 13.6161 15.3219 14.6667H13.3333C13.3333 12.9267 12.6666 11.3427 11.5753 10.1553ZM10.2266 8.638C10.7852 8.13831 11.232 7.52622 11.5376 6.84183C11.8432 6.15743 12.0008 5.41619 11.9999 4.66666C12.0013 3.75564 11.7683 2.85958 11.3233 2.06466C12.0783 2.21639 12.7576 2.62491 13.2456 3.2208C13.7335 3.81668 14.0001 4.56315 13.9999 5.33333C14.0001 5.80831 13.8987 6.27784 13.7027 6.71045C13.5066 7.14306 13.2203 7.52876 12.863 7.84169C12.5056 8.15463 12.0856 8.38757 11.6309 8.52491C11.1762 8.66224 10.6974 8.7008 10.2266 8.638Z"
                                fill="#047857"
                            />
                        </svg>
                    </div>
                    <div class="pl-3 w-full">
                        <div class="flex items-center justify-between w-full">
                            <p tabindex="0" class="focus:outline-none text-sm leading-none"><span class="text-indigo-700">{{ notification.user }} </span> {{ notification.message }} </p>
                            <div class="flex gap-2">
                                <a href="{% url 'accept_friend_request' notification.id %}">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hover:text-green-500" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                                    </svg>
                                </a>
                                <a href="{% url 'reject_friend_request' notification.id %}">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hover:text-red-600" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                                    </svg>
                                </a>
                            </div>
                    
                        </div>

                        <p tabindex="0" class="focus:outline-none text-xs leading-3 pt-1 text-gray-500">{{ notification.created_at }}</p>
                    </div>
                </div>

                <script>
                $.ajax({
                    url: "{% url 'nt_r' notification.id %}",
                    type: "POST",
                    data: {
                        notification_id: {{ notification.id }},
                        csrfmiddlewaretoken: "{{ csrf_token }}"
                    },


                    success: function show() {
                        console.log("Notificación marcada como leída: {{ notification.id }}");
                    },
                    error: function error() {
                        console.log("Error al marcar la notificación como leída: {{ notification.id }}");
                    }
                });
            </script>
            {% else %}
                <div class="w-full p-3 mt-4 bg-white rounded flex">
                    <div tabindex="0" aria-label="post icon" role="img" class="focus:outline-none w-8 h-8 border rounded-full border-gray-200 flex items-center justify-center">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4.30325 12.6667L1.33325 15V2.66667C1.33325 2.48986 1.40349 2.32029 1.52851 2.19526C1.65354 2.07024 1.82311 2 1.99992 2H13.9999C14.1767 2 14.3463 2.07024 14.4713 2.19526C14.5963 2.32029 14.6666 2.48986 14.6666 2.66667V12C14.6666 12.1768 14.5963 12.3464 14.4713 12.4714C14.3463 12.5964 14.1767 12.6667 13.9999 12.6667H4.30325ZM5.33325 6.66667V8H10.6666V6.66667H5.33325Z" fill="#4338CA" />
                        </svg>
                    </div>
                    <div class="pl-3">
                        <p tabindex="0" class="focus:outline-none text-sm leading-none"><span class="text-indigo-700">{{ request.user }}</span> {{ notification.message }} </p>
                        <p tabindex="0" class="focus:outline-none text-xs leading-3 pt-1 text-gray-500">{{ notification.created_at }}</p>
                    </div>
                </div>

        {% endif %}

            {%endfor%}


            </div>

        </div>

    </div>







    <style>
        #notification {
            transition: transform 0.5s ease-in-out;
          }
    </style>

    <script>
    let notification = document.getElementById("notification");
    let checdiv = document.getElementById("chec-div");
    let flag3 = false;
    
    const notificationHandler = () => {
      if (!flag3) {
        notification.classList.add("translate-x-full");
        notification.classList.remove("translate-x-0");
        setTimeout(function () {
          checdiv.classList.add("hidden");
        }, 1000);
        flag3 = true;
      } else {
        setTimeout(function () {
          notification.classList.remove("translate-x-full");
          notification.classList.add("translate-x-0");
        }, 1000);
        checdiv.classList.remove("hidden");
        flag3 = false;
      }
    };
    
    let openModalButton = document.getElementById("open-modal-button");
    openModalButton.addEventListener("click", notificationHandler);

</script>


<div class="p-8">
    <div class="p-8 bg-black bg-opacity-50 shadow mt-6">
        <div class="grid grid-cols-1 md:grid-cols-3">
            <div class="grid grid-cols-3 text-center order-last md:order-first mt-20 md:mt-0">
                <div>
                    <p class="font-bold text-white text-xl">{{ friends_count }}</p>
                    <p class="text-gray-400 font-bold">Friends</p>
                </div>
                <div>
                    <p class="font-bold text-white text-xl">True</p>
                    <p class="text-gray-400 font-bold">Programing</p>
                </div>
                <div>
                    <p class="font-bold text-white text-xl">False</p>
                    <p class="text-gray-400 font-bold">Tars</p>
                </div>
            </div>


     


            <div class="relative">
             
                    {% if user_raid.avatar.url %}
                    <div class="w-48 h-48 bg-indigo-100 mx-auto rounded-full shadow-2xl absolute inset-x-0 top-0 -mt-20 flex items-center justify-center text-indigo-500" style="background-image: url('{{ user_raid.avatar.url }}'); background-size: cover; background-position: center;">
                    {%else%}
                    <div class="w-48 h-48 bg-indigo-100 mx-auto rounded-full shadow-2xl absolute inset-x-0 top-0 -mt-20 flex items-center justify-center text-indigo-500 ">

                    <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                            clip-rule="evenodd" />
                        </svg> 

                    {%endif%}
                </div>
            </div>
            <div class="space-x-8 flex justify-between mt-32 md:mt-0 md:justify-center">
                {% if request.user != user_raid.user %}
                {% if is_friend1 or is_friend2  %}
                <button
                    class="text-white py-2 px-4 uppercase rounded bg-blue-400 hover:bg-blue-500 shadow hover:shadow-lg font-medium transition transform hover:-translate-y-0.5">
                    Amigos</button> 
                   
                {% elif has_sent_request_to_user %}
                <button
                class="text-white py-2 px-4 uppercase rounded bg-blue-400 hover:bg-blue-500 shadow hover:shadow-lg font-medium transition transform hover:-translate-y-0.5">
                Solicitud pendiente</button> 
                
                {% else %}
                    <a href="{% url 'send_friend_request' user_name=user_raid.user %}" class="text-white py-4 px-4 uppercase rounded bg-blue-400 hover:bg-blue-500 shadow hover:shadow-lg font-medium transition transform hover:-translate-y-0.5">Enviar solicitud de amistad</a>
                {% endif %}
            
    
         
                    {% endif %}    
                </div>
        </div>
        <div class="mt-20 text-center border-b pb-12 text-white font-semibold text-center">
            <h1 class="text-2xl sm:text-4xl pb-8 font-bold text-center"><span class="sm:text-4xl text-2xl text-center   font-bold pb-8 text-gray-400">#{{ user_raid.user }} - </span>@{{ user_raid.username }}</h1>
            <p class="mt-8 ">{{ user_raid.current_job }} - {{ user_raid.country }}</p>
            <p class="mt-2 status-description">{{ user_raid.status_desc }}</p>
        </div>
        <div class="mt-12 flex flex-col justify-center text-white font-semibold">
            <p class=" text-center  lg:px-16 status-description" >{{ user_raid.description }}</p>
            <div class="flex  justify-center  py-4 gap-3">
                <a href="{{ user_raid.url_github }}" target="_blank"><i class="fab fa-github fa-lg  hover:text-red-800"></i></a>
                <a href="{{ user_raid.url_linkedin }}" target="_blank"><i class="fab fa-linkedin fa-lg hover:text-red-800"></i></a>
            </div>

        </div>
    </div>
</div>

<style>
    .status-description {
        margin-top: 8px;
        word-wrap: break-word;
    }
</style>


{%else%}
<!-- component -->
<div class="overflow-y-auto  bg-gray-800">
    <div class="flex justify-center items-end text-center sm:block">
      <div class="bg-gray-500 transition-opacity bg-opacity-75"></div>
      <span class="hidden sm:inline-block sm:align-middle sm:h-screen">​</span>
      <div class= "inline-block text-left bg-gray-900 rounded-lg overflow-hidden align-bottom transition-all transform
          shadow-2xl sm:my-8 sm:align-middle sm:max-w-xl sm:w-full">
        <div class="items-center w-full mr-auto ml-auto relative max-w-7xl md:px-12 lg:px-24">
          <div class="grid grid-cols-1">
            <div class="mt-4 mr-auto mb-4 ml-auto bg-gray-900 max-w-lg">
              <div class="flex flex-col items-center pt-6 pr-6 pb-6 pl-6">
                <p class="mt-8 text-2xl font-semibold leading-none text-white tracking-tighter lg:text-3xl">#{{ request.user }}
                    </p>
                <p class="mt-3 text-base leading-relaxed text-center text-gray-200 font-bold">Parece que no tienes un perfil dale click en el boton create para crearlo!!</p>
                <div class="w-full mt-6">
                  <a  href="{% url 'create_profile' %}" class="flex text-center items-center justify-center w-full pt-4 pr-10 pb-4 pl-10 text-base
                      font-medium text-white bg-indigo-600 rounded-xl transition duration-500 ease-in-out transform
                      hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Create</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

{%endif%}


</body>
</html>